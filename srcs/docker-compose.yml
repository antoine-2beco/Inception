name : inception

volumes : 
    mariadb :
        name : mariadb
        driver : local
        driver_opts :
            device : /Users/antoinedb/Desktop/dev/inception/data/mariadb/
            o : bind
            type : none

    wordpress :
        name : wordpress
        driver : local
        driver_opts :
            device : /Users/antoinedb/Desktop/dev/inception/data/wordpress/
            o : bind
            type : none

networks :
    inception :
        name : inception
        driver : bridge

services :
    mariadb :
        container_name : mariadb
        build : requirements/mariadb/
        image : mariadb:11.8
        volumes :
            - mariadb:/var/lib/mysql
        env_file :
            - .env
        networks :
            - inception
        restart : always
        depends_on :
            - nginx
        # healthcheck :
        #     test : ["CMD", "mysqladmin", "ping", "-h", "localhost"]
        #     interval : 10s
        #     timeout : 5s
        #     retries : 5

    
    wordpress :
        container_name : wordpress
        build : ./requirements/wordpress/
        image : wordpress:5.1.1-fpm-alpine
        networks :
            - inception
        volumes :
            - wordpress:/var/www/html
        env_file :
            - .env
        restart : always
        depends_on :
            - mariadb
            - nginx

    nginx :
        container_name : nginx
        build : ./requirements/nginx/
        image : nginx:1.25
        ports :
            - 443:443
        volumes :
            - wordpress:/var/www/html
        networks :
            - inception
        restart : always

